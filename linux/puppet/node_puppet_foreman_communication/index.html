



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="TechTaco Knowledge Base">
      
      
        <link rel="canonical" href="http://kb.techtaco.org/linux/puppet/node_puppet_foreman_communication/">
      
      
        <meta name="author" content="Steven Bambling">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Node puppet foreman communication - Knowledge Base</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#overview" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://kb.techtaco.org" title="Knowledge Base" class="md-header-nav__button md-logo">
          
            <img src="../../../images/techtaco.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Knowledge Base
            </span>
            <span class="md-header-nav__topic">
              Node puppet foreman communication
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/smbambling/techtaco-kb/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    techtaco-kb
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://kb.techtaco.org" title="Knowledge Base" class="md-nav__button md-logo">
      
        <img src="../../../images/techtaco.png" width="48" height="48">
      
    </a>
    Knowledge Base
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/smbambling/techtaco-kb/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    techtaco-kb
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Apple
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Apple
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../apple/administrative/nav/" title="Administrative" class="md-nav__link">
      Administrative
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Linux
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Linux
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../administrative/nav/" title="Administrative" class="md-nav__link">
      Administrative
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apache/nav/" title="Apache" class="md-nav__link">
      Apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clustering/nav/" title="Clustering" class="md-nav__link">
      Clustering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nav/" title="Puppet" class="md-nav__link">
      Puppet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../git/nav/" title="GIT" class="md-nav__link">
      GIT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../monitoring/nav/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../pki_certificates/nav/" title="PKI Certificates" class="md-nav__link">
      PKI Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postfix/nav/" title="Postfix" class="md-nav__link">
      Postfix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postgresql/nav/" title="PostgreSQL" class="md-nav__link">
      PostgreSQL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Networking
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Networking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../networking/cisco/nav/" title="Cisco" class="md-nav__link">
      Cisco
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../tips_and_tricks/nav/" title="Tips & Tricks" class="md-nav__link">
      Tips & Tricks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Windows
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Windows
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../windows/administrative/nav/" title="Administrative" class="md-nav__link">
      Administrative
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../windows/outlook/nav/" title="Outlook" class="md-nav__link">
      Outlook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../disclaimer/" title="Disclaimer" class="md-nav__link">
      Disclaimer
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#secure-communication" title="Secure Communication" class="md-nav__link">
    Secure Communication
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#puppet-run-communication-flow" title="Puppet Run Communication Flow" class="md-nav__link">
    Puppet Run Communication Flow
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-security-zone" title="Core Security Zone" class="md-nav__link">
    Core Security Zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dmz-secruity-zone" title="DMZ Secruity Zone" class="md-nav__link">
    DMZ Secruity Zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pfs-security-zone" title="PFS Security Zone" class="md-nav__link">
    PFS Security Zone
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foreman-provisioning-communication-flow" title="Foreman Provisioning Communication Flow" class="md-nav__link">
    Foreman Provisioning Communication Flow
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-security-zone_1" title="Core Security Zone" class="md-nav__link">
    Core Security Zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dmz-security-zone" title="DMZ Security Zone" class="md-nav__link">
    DMZ Security Zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pfs-security-zone_1" title="PFS Security Zone" class="md-nav__link">
    PFS Security Zone
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multi-site-core-security-zone-puppet-run-communication-flow" title="Multi-Site CORE Security Zone, Puppet Run Communication Flow" class="md-nav__link">
    Multi-Site CORE Security Zone, Puppet Run Communication Flow
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/smbambling/techtaco-kb/edit/master/docs/linux/puppet/node_puppet_foreman_communication.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Node puppet foreman communication</h1>
                
                <h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Details the communcation path between Nodes, Puppet and Foreman for both a Puppet run and Foreman provisioning.</p>
<p>The architecutre resides over multiple security zones PFS(External), DMZ and CORE.  These security zones are like the layers of an oninion and access inbound from one security zone to another is restricted by a set of firewalls.  </p>
<p>As a rule inbound traffic can only pass to the adjacent security zone and can not 'hop' security zones.  An example is that traffic from the PFS security zone can not communicate directly with the CORE secuirty zone.</p>
<p><img alt="seczones" src="../attachments/seczones.png" /></p>
<p>To allow PuppetServers(Masters) in the PFS and DMZ security zones to request a nodes ENC output as well as submit facts and reports back to the Foreman server located in the CORE security zone a Apache SSL reverse proxy is used.</p>
<p>This provides a better security model by limiting the access directly from the PFS sercurity zone and providing a single point of entry from the DMZ security zone into the CORE sercurity zone.</p>
<h2 id="secure-communication">Secure Communication<a class="headerlink" href="#secure-communication" title="Permanent link">&para;</a></h2>
<p>To provide a secure communication path from the PuppetServer/Foreman Smart-Proxy back to the Foreman Server, the Apache reverse SSL proxy is configured with both client and server SSL communication.</p>
<blockquote>
<p>The architechture requires all certificates used for communicaiton by the Foreman Server, Apache reverse SSL proxy and Foreman Smart-Proxies are all signed by the same certificate authority (CA)</p>
</blockquote>
<p>PuppetServers/Foreman Smart-Proxies that are connecting to the Apache reverse SSL proxy are required to have PKI client certificates that is signed by the same certificate authority (CA) as the Apache reverse proxy PKI server certificate.</p>
<p>Foreman Server inturn requires that the Apache reverse SSL proxy provide a client certificate that is signed by the same certificate authority (CA) as the certificate Foreman is configured to communicate with its Foreman Smart-Proxies.</p>
<h2 id="puppet-run-communication-flow">Puppet Run Communication Flow<a class="headerlink" href="#puppet-run-communication-flow" title="Permanent link">&para;</a></h2>
<h4 id="core-security-zone">Core Security Zone<a class="headerlink" href="#core-security-zone" title="Permanent link">&para;</a></h4>
<p><img alt="puppetrun_core" src="../attachments/puppetrun_core.png" /></p>
<ol>
<li>Node send <strong>facts</strong> to PuppetServer</li>
<li>PuppetServer obtains ENC data from Foreman</li>
<li>PuppetServer sends compiled <strong>catalog</strong> to Node</li>
<li>Node sends <strong>report</strong> information back to PuppetServer</li>
<li>PuppetServer sends <strong>report</strong> information and <strong>facts</strong> to Foreman</li>
</ol>
<h4 id="dmz-secruity-zone">DMZ Secruity Zone<a class="headerlink" href="#dmz-secruity-zone" title="Permanent link">&para;</a></h4>
<p><img alt="puppetrun_dmz" src="../attachments/puppetrun_dmz.png" /></p>
<ol>
<li>Node send <strong>facts</strong> to PuppetServer</li>
<li>PuppetServer requests ENC data though the Apache reverse proxy in the DMZ security zone<ol>
<li>Apache reverse proxy in the DMZ security zone forwards request to Foreman in the CORE security zone</li>
</ol>
</li>
<li>PuppetServer sends compiled <strong>catalog</strong> to Node</li>
<li>Node sends <strong>report</strong> information back to PuppetServer</li>
<li>PuppetServer sends <strong>report</strong> information and <strong>facts</strong> though Apache reverse proxy in the DMZ security zone<ol>
<li>Apache reverse proxy in the DMZ security zone forwards <strong>report</strong> information and <strong>facts</strong> to Foreman in the CORE security zone</li>
</ol>
</li>
</ol>
<h4 id="pfs-security-zone">PFS Security Zone<a class="headerlink" href="#pfs-security-zone" title="Permanent link">&para;</a></h4>
<p><img alt="puppetrun_pfs" src="../attachments/puppetrun_pfs.png" /></p>
<ol>
<li>Node send <strong>facts</strong> to PuppetServer</li>
<li>PuppetServer requests ENC data though Apache reverse proxy in the DMZ security zone<ol>
<li>Apache reverse proxy in the PFS security zone forwards request to Apache reverse proxy in the DMZ security zone</li>
<li>Apache reverse proxy in the DMZ security zone forwards request to Foreman in the CORE security zone</li>
</ol>
</li>
<li>PuppetServer sends compiled <strong>catalog</strong> to Node</li>
<li>Node sends <strong>report</strong> information back to PuppetServer</li>
<li>PuppetServer sends <strong>report</strong> information and <strong>facts</strong> though the Apache reverse proxy in the PFS security zone<ol>
<li>Apache reverse proxy in the PFS security zone forwards <strong>report</strong> information and <strong>facts</strong> to Apache reverse proxy in the DMZ security zone</li>
<li>Apache reverse proxy in the DMZ security zone forwards <strong>report</strong> information and <strong>facts</strong> to Foreman in the CORE security zone</li>
</ol>
</li>
</ol>
<h2 id="foreman-provisioning-communication-flow">Foreman Provisioning Communication Flow<a class="headerlink" href="#foreman-provisioning-communication-flow" title="Permanent link">&para;</a></h2>
<h4 id="core-security-zone_1">Core Security Zone<a class="headerlink" href="#core-security-zone_1" title="Permanent link">&para;</a></h4>
<p><img alt="provisioning_core" src="../attachments/provisioning_core.png" /></p>
<ol>
<li>Node PXE client broadcasts <strong>DHCPDISCOVER</strong></li>
<li>DHCP server send <strong>DHCPOFFER</strong> including <strong>IP address</strong> and <strong>PXE file</strong> location</li>
<li>Node PXE client obtains the <strong>boot image</strong> from the TFTP server</li>
<li>Boot image searches the <strong>pxelinux.cfg directory</strong> on the TFTP server for boot configuration file</li>
<li>Node obtains the <strong>provisioning (kickstart) file</strong> from the Foreman server</li>
<li>Kickstart installs from a remote installation tree on the Repository Mirror server</li>
<li>Kickstart executes a Puppet run on the Node</li>
<li>Node reports to the Foreman server it was built</li>
</ol>
<h4 id="dmz-security-zone">DMZ Security Zone<a class="headerlink" href="#dmz-security-zone" title="Permanent link">&para;</a></h4>
<p><img alt="provisioning_dmz" src="../attachments/provisioning_dmz.png" /></p>
<ol>
<li>Node PXE client broadcasts <strong>DHCPDISCOVER</strong></li>
<li>DHCP server send <strong>DHCPOFFER</strong> including <strong>IP address</strong> and <strong>PXE file</strong> location</li>
<li>Node PXE client obtains the <strong>boot image</strong> from the TFTP server</li>
<li>Boot image searches the <strong>pxelinux.cfg directory</strong> on the TFTP server for boot configuration file</li>
<li>Node obtains the <strong>provisioning (kickstart) file</strong> though the Apache reverse proxy in the DMZ security zone</li>
<li>Apache reverse proxy in the DMZ security zone forwards request to Foreman in the CORE security zone</li>
<li>Kickstart installs from a remote installation tree on the Repository Mirror server</li>
<li>Kickstart executes a Puppet run on the Node</li>
<li>Node reports to the Foreman server it was built though the Apache reverse proxy in the DMZ security zone</li>
<li>Apache reverse proxy in the DMZ security zone forwards report to Foreman in the CORE security zone</li>
</ol>
<h4 id="pfs-security-zone_1">PFS Security Zone<a class="headerlink" href="#pfs-security-zone_1" title="Permanent link">&para;</a></h4>
<p><img alt="provisioning_pfs" src="../attachments/provisioning_pfs.png" /></p>
<ol>
<li>Node PXE client broadcasts <strong>DHCPDISCOVER</strong></li>
<li>DHCP server send <strong>DHCPOFFER</strong> including <strong>IP address</strong> and <strong>PXE file</strong> location</li>
<li>Node PXE client obtains the <strong>boot image</strong> from the TFTP server</li>
<li>Boot image searches the <strong>pxelinux.cfg directory</strong> on the TFTP server for boot configuration file</li>
<li>Node obtains the <strong>provisioning (kickstart) file</strong> though the Apache reverse proxy in the PFS security zone</li>
<li>Apache reverse proxy in the PFS security zone forwards request to Apache reverse proxy in the DMZ security zone</li>
<li>Apache reverse proxy in the DMZ security zone forwards request to Foreman in the CORE security zone</li>
<li>Kickstart installs from a remote installation tree on the Repository Mirror server</li>
<li>Kickstart executes a Puppet run on the Node</li>
<li>Node reports to the Foreman server it was built though the Apache reverse proxy in the DMZ security zone</li>
<li>Apache reverse proxy in the PFS security zone forwards report  to Apache reverse proxy in the DMZ security zone</li>
<li>Apache reverse proxy in the DMZ security zone forwards report to Foreman in the CORE security zone</li>
</ol>
<h2 id="multi-site-core-security-zone-puppet-run-communication-flow">Multi-Site CORE Security Zone, Puppet Run Communication Flow<a class="headerlink" href="#multi-site-core-security-zone-puppet-run-communication-flow" title="Permanent link">&para;</a></h2>
<p>It is common to have a setup with multiple sites that have both a <strong>DMZ</strong> and a <strong>CORE</strong> security zone. In this senario to abide with the security policy of not 'hopping' security zones and only  passing traffic to the adjacent security zone. The Puppet server in the 'passive' site <strong>CORE</strong> security zone needs to utilize the Apache reverse SSL Proxy to foward its <strong>report</strong> information and <strong>facts</strong> to the Foreman server in the 'active' site CORE security zone.</p>
<blockquote>
<p>Local communication between the Puppet server and its local nodes still behaves has described above</p>
</blockquote>
<p><img alt="multi-site" src="../attachments/multisite_communication.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 - 2019 Steven Bambling
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/smbambling" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>